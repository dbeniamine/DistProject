Modify NodeFct_t to take in account external event
finish the simulator
